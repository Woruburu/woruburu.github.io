import{u as Z,c as e,B as oe,S as l,m as b,a as c,C as ge,b as ee,d as m,A as p,L as S,H as de,T as z,e as H,F as u,f as y,t as te,g as ue,h as he,i as me,j as i,N as f,k as w,l as pe,n as Se,o as V,I as q,p as A,q as G,r as j,s as J,v as K,w as Q,x as U,y as W,z as X,D as Y,E as fe,M as v,G as we}from"./index.f84a5a35.js";import{C as ve,L as be}from"./Card.b4a4a919.js";import{f as ye}from"./index.01df5634.js";const Pe=r=>{const[,t]=Z(),o=()=>r.currentPage-1,g=()=>r.currentPage+1;return e(ge,{get children(){return e(oe,{size:"lg",attached:!0,colorScheme:"neutral",variant:"outline",get children(){return[e(l,{get when(){return b(()=>r.currentPage!==1,!0)()&&o()!==1},get children(){return[e(c,{onClick:()=>t({page:1}),children:"1"}),e(l,{get when(){return 1<o()-1},get children(){return e(c,{disabled:!0,variant:"ghost",children:"..."})}})]}}),e(l,{get when(){return o()>0},get children(){return e(c,{onClick:()=>t({page:o()}),get children(){return o()}})}}),e(c,{disabled:!0,get children(){return r.currentPage}}),e(l,{get when(){return g()<=r.totalPages},get children(){return e(c,{onClick:()=>t({page:g()}),get children(){return g()}})}}),e(l,{get when(){return b(()=>r.currentPage!==r.totalPages,!0)()&&g()!==r.totalPages},get children(){return[e(l,{get when(){return r.totalPages>g()+1},get children(){return e(c,{disabled:!0,variant:"ghost",children:"..."})}}),e(c,{onClick:()=>t({page:r.totalPages}),get children(){return r.totalPages}})]}})]}})}})},xe=te("<br>"),Ce=r=>e(ve,{get children(){return e(ee,{height:"100%",direction:"column",gap:"$3",get children(){return[e(m,{get children(){return e(p,{as:S,get href(){return`/${r.prompt.CorrelationId}`},get children(){return e(de,{level:2,size:"xl",get children(){return r.prompt.Title}})}})}}),e(m,{get children(){return e(z,{tabIndex:-1,noOfLines:2,_hover:{"-webkit-line-clamp":"initial"},_focus:{"-webkit-line-clamp":"initial"},get children(){return["Created:"," ",b(()=>ye(r.prompt.PublishDate??r.prompt.DateCreated,"yyyy/MM/dd")),xe.cloneNode(!0),"Tags:",e(l,{get when(){return r.prompt.Nsfw},get children(){return e(H,{textTransform:"lowercase",colorScheme:"danger",marginLeft:"$1",children:"nsfw"})}}),e(u,{get each(){return r.prompt.Tags.split(",")},children:t=>e(p,{as:S,get href(){return`/?tags=${t.trim()}`},get children(){return e(H,{textTransform:"lowercase",colorScheme:"primary",marginLeft:"$1",get children(){return t.trim()}})}})})]}})}}),e(m,{get children(){return e(z,{noOfLines:4,get children(){return e(l,{get when(){return r.prompt.Description},get fallback(){return r.prompt.PromptContent},children:t=>t})}})}}),e(y,{mt:"auto",get children(){return e(p,{ml:"auto",as:S,get href(){return`/${r.prompt.CorrelationId}`},get children(){return e(c,{type:"button",children:"View Prompt"})}})}})]}})}}),Te=te("<form></form>"),$e=()=>{const r=ue(he),[t,o]=Z(),g=me(),[d,h]=i({type:"Loading"}),[P,x]=i(t.title??""),[C,T]=i(t.nsfw?t.nsfw:f[0]),[L,k]=i(t.tag??""),[E,$]=i(t.tagSearch?t.tagSearch:w[0]),[N,I]=i(t.matchExact?t.matchExact==="true":!1),[O,D]=i(t.reverse?t.reverse==="true":!1),[re,ne]=i(),B=()=>{const n=Number.parseInt(t.page??"1");return Number.isNaN(n)?1:n},[M,F]=i(!1),ae=()=>{o({title:P(),nsfw:C(),tags:L(),tagSearch:E(),matchExact:N(),reverse:O(),page:1})};pe(()=>{const n=t.nsfw?t.nsfw:f[0],a=t.tagSearch?t.tagSearch:w[0],R=t.matchExact?t.matchExact==="true":!1,_=t.reverse?t.reverse==="true":!1;x(t.title??""),k(t.tags??""),T(n),$(a),D(_),I(R),ce({title:t.title??"",nsfw:n,tags:t.tags??"",tagSearchOption:a,matchTagsExactly:R,reverseSearch:_,page:B()})});const ce=n=>{r.type==="Loaded"&&(h({type:"Loading"}),(async()=>{try{const a=await r.service.search(n);h({type:"Loaded",prompts:a.prompts}),ne(a.pages)}catch(a){h({type:"Error",error:a.toString()})}})())},ie=()=>{const n=d();return n.type==="Error"&&n},le=()=>{const n=d();return n.type==="Loaded"&&n},s=()=>d().type==="Loading",se=async()=>{if(r.type==="Loaded"){F(!0);try{const n=await r.service.getRandom();g(`/${n}`)}catch{F(!1)}}};return e(ee,{direction:"column",gap:"$3",get children(){return[(()=>{const n=Te.cloneNode(!0);return n.addEventListener("submit",a=>{a.preventDefault(),ae()}),Se(n,e(y,{direction:{"@initial":"column","@md":"row"},get children(){return[e(V,{width:"100%",columns:{"@initial":1,"@md":2},gap:"$3",get children(){return[e(q,{get disabled(){return s()},get value(){return P()},placeholder:"Search Title",onInput:a=>x(a.currentTarget.value)}),e(A,{get disabled(){return s()},get defaultValue(){return C()},onChange:T,get children(){return[e(G,{get children(){return[e(j,{}),e(J,{})]}}),e(K,{get children(){return e(Q,{get children(){return e(u,{each:f,children:a=>e(U,{value:a,get children(){return[e(W,{children:a}),e(X,{})]}})})}})}})]}}),e(q,{get disabled(){return s()},get value(){return L()},placeholder:"Tags (comma delimited)",onInput:a=>k(a.currentTarget.value)}),e(Y,{get disabled(){return s()},get checked(){return N()},onChange:a=>I(a.currentTarget.checked),children:"Match Tags Exactly"}),e(A,{get disabled(){return s()},get defaultValue(){return E()},onChange:$,get children(){return[e(G,{get children(){return[e(j,{}),e(J,{})]}}),e(K,{get children(){return e(Q,{get children(){return e(u,{each:w,children:a=>e(U,{value:a,get children(){return[e(W,{children:a}),e(X,{})]}})})}})}})]}}),e(Y,{get disabled(){return s()},get checked(){return O()},onChange:a=>D(a.currentTarget.checked),children:"Reverse Search"})]}}),e(y,{mt:{"@initial":"$3","@md":"initial"},ml:{"@md":"auto"},pl:{"@md":"$3"},direction:{"@initial":"row-reverse","@md":"column"},get children(){return[e(c,{type:"submit",get loading(){return s()},get disabled(){return s()},children:"Search"}),e(c,{type:"button",mr:{"@initial":"auto","@md":"initial"},mt:"auto",size:"sm",colorScheme:"neutral",variant:"outline",get disabled(){return M()},get loading(){return M()},onClick:se,children:"Random"})]}})]}})),n})(),e(fe,{get children(){return[e(v,{get when(){return d().type==="Loading"},get children(){return e(be,{})}}),e(v,{get when(){return ie()},children:n=>e(we,{title:"Failed to search",get description(){return n.error}})}),e(v,{get when(){return le()},children:n=>e(V,{columns:{"@initial":1,"@md":2,"@2xl":3},gap:"$6",get children(){return e(u,{fallback:"No results",get each(){return n.prompts},children:a=>e(Ce,{prompt:a})})}})})]}}),e(l,{get when(){return re()},children:n=>e(Pe,{get currentPage(){return B()},totalPages:n})})]}})};export{$e as default};
//# sourceMappingURL=index.04a9d915.js.map
